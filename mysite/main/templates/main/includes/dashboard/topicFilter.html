<!-- Included in home.html -->

<!-- Topics Filter Title -->
<h5 class="pb-2 border-bottom">Topics</h5>

<!-- Topics to Filter By -->
<div class="overflow-y-scroll m-0 pe-0 ps-1 py-2 text-start" style="height: 15vh;">
  <div class="form-check">
    <input class="form-check-input topics-check" type="checkbox" value="" id="all-topics">
    <label class="form-check-label" for="all-topics">
      Select All
    </label>
  </div>

  <!-- Loop through all topics -->
  {% for topic in distinct_topics %}
  <div class="form-check text-start">
    <input class="form-check-input  topics-check" type="checkbox" value="{{ topic }}" id="topic-{{ forloop.counter }}">
    <label class="form-check-label" for="topic-{{ forloop.counter }}">
      {{ topic }}
    </label>
  </div>
  {% endfor %}
</div>

<script>
  $('#all-topics').on('click', function () {
      var isChecked = $(this).is(':checked');
      $('.topics-check').prop('checked', isChecked);
  });

  $('.topics-check').not('#all-topics').on('click', function () {
      if (!$(this).is(':checked')) {
          $('#all-topics').prop('checked', false);
      } else if ($('.topics-check').not('#all-topics').filter(':checked').length === $('.topics-check').not('#all-topics').length) {
          $('#all-topics').prop('checked', true);
      }
  });
</script>