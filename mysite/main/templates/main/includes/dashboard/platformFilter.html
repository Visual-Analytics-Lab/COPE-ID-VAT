<!-- Included in home.html -->

<!-- Platforms Filter Title -->
<h5 class="pb-2 border-bottom">Platforms</h5>

<div class="overflow-y-scroll m-0 px-0 py-2 text-start" style="height: 15vh;">
  <div class="form-check">
    <input class="form-check-input plats-check" type="checkbox" value="" id="all-plats">
    <label class="form-check-label" for="all-plats">
      Select All
    </label>
  </div>

  <!-- Loop through all platforms -->
  {% for platform in distinct_platforms %}
  <div class="form-check text-start">
    <input class="form-check-input plats-check" type="checkbox" value="{{ platform }}" id="platform-{{ forloop.counter }}">
    <label class="form-check-label" for="platform-{{ forloop.counter }}">
      {{ platform }}
    </label>
  </div>
  {% endfor %}
</div>

<script>
  $('#all-plats').on('click', function () {
      var isChecked = $(this).is(':checked');
      $('.plats-check').prop('checked', isChecked);
  });

  $('.plats-check').not('#all-plats').on('click', function () {
      if (!$(this).is(':checked')) {
          $('#all-plats').prop('checked', false);
      } else if ($('.plats-check').not('#all-plats').filter(':checked').length === $('.plats-check').not('#all-plats').length) {
          $('#all-plats').prop('checked', true);
      }
  });
</script>